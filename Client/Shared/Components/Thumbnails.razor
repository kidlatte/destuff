@using Destuff.Client.Pages.Uploads

@if (Items != null)
{
    <MudGrid Spacing="1">
        @foreach(var item in Items)
        {
            <MudItem xs="6" sm="4" md="2">
                <MudBadge OnClick="_ => delete?.Open(item)" Icon="@Icons.Material.Filled.Close" Color="Color.Error"
                          Overlap="true" Bordered="true" Class="mud-badge-cursor-pointer">
                    <MudLink Href="@item.Url" Target="_blank">
                        <MudImage Src="@item.Url" Alt="@item.FileName" Fluid="true" Elevation="1" Class="rounded-lg" />
                    </MudLink>
                </MudBadge>
            </MudItem>
        }
    </MudGrid>
}

<DeleteModal @ref="delete" OnDeleted="OnDeleted" />

@code
{
    [Parameter]
    public IEnumerable<UploadModel>? Items { get; set; }

    DeleteModal? delete;

    void OnDeleted(UploadModel upload)
    {
        Items = Items?.Where(x => x.Id != upload.Id);
    }
}