@page "/users"


@using BlazorGrid.Abstractions
@using BlazorGrid.Components
@using System.Text.Json
@using System.Threading
@inject HttpClient Http

<h1>Users</h1>

<p>This component demonstrates fetching data from the server.</p>

<div style="height: 400px;">
    <BlazorGrid TRow="UserModel" Provider="LoadData">
        <GridCol For="() => context.UserName" Caption="UserName" />
    </BlazorGrid>
</div>

@code
{
    private async ValueTask<BlazorGridResult<UserModel>?> LoadData(BlazorGridRequest request, CancellationToken cancellationToken)
    {
        var response = await Http.PostAsJsonAsync(ApiRoutes.Users, request, cancellationToken);
        return await response.Content.ReadFromJsonAsync<BlazorGridResult<UserModel>>();
    }
}